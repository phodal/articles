如何提升 Web 应用安全
===

按照全球性的开源安全组织 OWASP 统计在 2017 年应用

上榜的十大 OWASP 漏洞为：注入、破裂的验证机制、敏感数据暴露、XML外部实体(XXE)、遭破坏的访问控制、错误的安全配置、跨站脚本(XSS)、不安全反序列化、使用带已知漏洞的组件，以及日志和监视不足。

有些问题，是可以由程序和人为解决的，有些则是需要通过安全人员来完成的。

 - 安全内建
 - 使用工具扫描
 - 以攻为守



安全内建
---

### 输入校验

前端基本验证校验，后端再次检验

除此，还需要防止 API 直接访问，如 Postman

### 编码输入与输出

编码问题一个常见的 BUG 来源。

 - 输入的 textarea
 - HTML 内容

### 授权的安全处理

#### 后端密码存储
 
前端 Token 保存 将 Token 存在 LocalStorage，就会存在一个过期的问题。

#### 过期处理

### 传输数据安全

采用 HTTPS

#### CSP

> 内容安全策略(CSP, Content Security Policy) 是一个附加的安全层，用于帮助检测和缓解某些类型的攻击，包括跨站脚本(XSS) 和数据注入等攻击。

采用 HSTS 策略，通知浏览器只能通过HTTPS访问当前资源，它可以防止混合内容

使用工具
---

### 代码扫描

> Sonar (SonarQube)是一个开源平台，用于管理源代码的质量。Sonar 不只是一个质量数据报告工具，更是代码质量管理平台。支持的语言包括：Java、PHP、C#、C、Cobol、PL/SQL、Flex 等。

 - 代码覆盖：通过单元测试，将会显示哪行代码被选中
 - 改善编码规则
 - 搜寻编码规则：按照名字，插件，激活级别和类别进行查询

### 漏洞扫描

### 依赖检测

应用内的代码安全往往更受重视，但是第三方依赖中的问题，往往可能没有得到重视。

诸如某个版本已经公开的漏洞

可以使用诸如 OWASP Dependency-check

以攻为守
---

### SQL 注入

>   SQL攻击（SQL injection），简称注入攻击，是发生于应用程序之数据库层的安全漏洞。简而言之，是在输入的字符串之中注入SQL指令，在设计不良的程序当中忽略了检查，那么这些注入进去的指令就会被数据库服务器误认为是正常的SQL指令而运行，因此遭到破坏或是入侵。


如《[內建安全的软件开发](https://insights.thoughtworks.cn/bsi-app-developing/)》 一文中所说，SQL 注入攻击，其全球范围内的漏洞数量呈现出了非常显著的下降趋势。而

### XSS

> 跨站脚本（英语：Cross-site scripting，通常简称为：XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。这类攻击通常包含了HTML以及用户端脚本语言。

Sleepy Puppy

结论
---

